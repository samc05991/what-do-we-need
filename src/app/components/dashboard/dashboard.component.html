<div class="wd-container">
    <h2>Dashboard</h2>
</div>
<div class="wd-container wd-dashboard">
    <div class="wd-we-need wd-panel">
        <div class="wd-panel-header">
            <strong><span class="wd-label-header">What do we need?</span></strong>
            <button type="button" class="wd-btn wd-btn-sm" (click)="addItemToStock = !addItemToStock">Add new item</button>

            <div *ngIf="addItemToStock" class="margin-top-20">
                <strong><span class="wd-label">Add Item</span></strong><br><br>
        
                <strong><span class="wd-label">Name</span></strong><br>
                <input type="text" [(ngModel)]="newItem.name" class="wd-input" placeholder="Item Name"><br><br>
        
                <!-- <strong><span class="wd-label">Quantity</span></strong><br>
                <input type="text" [(ngModel)]="newItem.quantity" class="wd-input" placeholder="Item Quantity"><br><br>
         -->
                <button type="button" class="wd-btn wd-btn-block margin-top-20" (click)="addNewItemToNeeds()">Add To List</button>
            </div>
        </div>

        <div class="wd-list-item margin-top-10" *ngFor="let item of needs; let i = index;">
            <div class="wd-list-item-title">
                <strong><span class="wd-label">{{item.name}}</span></strong><br>
            </div>

            <div class="wd-list-item-controls">
                <button type="button" class="wd-btn wd-btn-sm wd-btn-primary margin-right-10" (click)="addToStock(item, i)">I Got This!</button>
                <button type="button" class="wd-btn wd-btn-sm wd-btn-danger" (click)="removeFromNeeds(i)">
                    <span><fa-icon [icon]="faTrashAlt"></fa-icon></span>
                </button>
            </div>
        </div>
    </div>
    <div class="inventory wd-panel">
        <div class="wd-panel-header">
            <strong><span class="wd-label-header">What have we got?</span></strong>
            <button type="button" class="wd-btn wd-btn-sm" disabled>Manage Inventory</button>
        </div>

        <div class="wd-list-item margin-top-10" *ngFor="let item of stock; let i = index;">
            <div class="wd-list-item-title">
                <strong><span class="wd-label">{{item.name}}</span></strong><br>
            </div>

            <div class="wd-list-item-controls">
                <button type="button" class="wd-btn wd-btn-sm wd-btn-primary margin-right-10" (click)="addToNeedsFromStock(item, i)">I Need This!</button>
                <button type="button" class="wd-btn wd-btn-sm wd-btn-danger" (click)="removeFromStock(i)">
                    <span><fa-icon [icon]="faTrashAlt"></fa-icon></span>
                </button>
            </div>
        </div>
    </div>
    <div class="lists wd-panel">
        <div class="wd-panel-header margin-bottom-20">
            <strong><span class="wd-label-header">Lists of stuff...</span></strong>
            <button type="button" class="wd-btn wd-btn-sm" [routerLink]="['/create-list']">
                New  <span><fa-icon [icon]="faExternalLinkAlt"></fa-icon></span>
            </button>
        </div>

        <div class="wd-list-item wd-list-parent" *ngFor="let list of lists; let k = index;" (click)="list.isExpanded = !list.isExpanded">
            <div class="wd-panel-header">
                <strong><span class="wd-label">{{list.name}}</span></strong>
    
                <button type="button" class="wd-btn wd-btn-sm wd-btn-danger" (click)="$event.stopPropagation(); deleteList(list, k)">
                    <span><fa-icon [icon]="faTrashAlt"></fa-icon></span>
                </button>
    
                <button type="button" class="wd-btn wd-btn-sm wd-btn-secondary margin-right-10" (click)="$event.stopPropagation()">
                    <span><fa-icon [icon]="faCog"></fa-icon></span>
                </button>
                <button type="button" class="wd-btn wd-btn-sm wd-btn-secondary margin-right-10">{{list.isExpanded ? 'Hide' : 'Show'}} Items</button>
            </div>

            <div *ngIf="list.isExpanded" [@enterAnimation] class="margin-top-20">
                <div *ngFor="let item of list.items; let i = index">
                    <div class="wd-list-item-title">
                        <span class="wd-label">{{item.name}}</span>
                    </div>
        
                    <div class="wd-list-item-controls">
                        <button type="button" class="wd-btn wd-btn-sm wd-btn-primary margin-right-10" (click)="addToNeedsFromList(item, i)">I Need This!</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>